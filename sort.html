<!DOCTYPE html>
<html>
<title>sort</title>
<meta name="viewport" content="width=device-width" >
<link rel="stylesheet" href="./jqm/jquery.mobile.css" />
<script type="text/javascript" src="./jquery.js"></script>
<script type="text/javascript" src="./jqm/jquery.mobile.js"></script>
<body>
<div id="preContent"></div>
<script type="text/javascript">
<!--
var link=location.search.substr(1);
var decLink=decodeURIComponent(link);
  //alert(decLink);
  var mode=decLink.split(',')[0];
  var upDown=decLink.split(',')[1];
  var inText=decLink.split(',')[2].split('\n');
  //alert('mode='+ mode +'\nupDown='+ upDown +'\ninText='+ inText);
var st=sorter(inText);
  
var el=document.getElementById('preContent');
el.innerHTML=st;

function sorter(e){
  alert('mode='+mode+'\nupDown='+upDown+'\ne='+e);
  switch(mode){
    case 'num':
      if (upDown=='up') {
        e.sort(function(a, b){
          return a - b;
        });
      } else {
        e.sort(function(a, b){
          return b - a;
        });
      }
      break;
    case 'date':
      if (e[0].indexOf('/')>0){
        var sep='/';
      } else if (e[0].indexOf('-')>0){
        var sep='-';
      }
      for (i=0;i<e.length;i++){
        var dates=e[i].split(sep);
        var datesLength=dates.length;
        for (j=datesLength-2;j<datesLength;j++){
          if parseInt(dates[j])<10 {
            dates[j]='0'+dates[j];
          }
        }
        e[i]='';
        for (j=0;j<datesLength;j++){
          if (j!=datesLength-1){
            e[i]+=dates[j]+sep;
          } else {
            e[i]+=dates[j];
          }
        }
      }
      return e;
      break;
  }
}

// -->
</script>
</body>
</html>
